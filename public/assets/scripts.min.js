$(document).ready(function(){var oTable=$('#datatables').DataTable({"ajax":{"url":baseurl+"getdatatables","dataType":"json"},"sServerMethod":"POST","bServerSide":true,"bAutoWidth":false,"bSortClasses":false,"bscrollCollapse":true,"scrollX":true,"language":{"decimal":",","thousands":"."},"columnDefs":[{"type":"html","targets":0}],});});$(document).ready(function(){$('body').on('click','[data-load-remote]',function(e){e.preventDefault();var $this=$(this);var remote=$this.data('load-remote');var targets=$this.data('remote-target');var forms=$this.data('form');if(remote){$($this.data('remote-target')).load(remote);if(forms){$(targets).append("<div class='oke'><h3>Hore</h3></div>");}}});$('body').on('click','[data-sub-module]',function(e){e.preventDefault();var $this=$(this);var baseurl=$this.data('sub-module');});$("body").on("click","#save1",function(e){e.preventDefault();save1(0);});function save1(id){var data=$('form#addform1').serializeArray();data.push({name:'ajax',value:1});$(this).ready(function(){$.ajax({url:'http://sim.muriaps.com/inv/beli/submit',data:data,type:"POST",success:function(){}});});}
$('body').on('click','[data-load]',function(e){e.preventDefault();var $this=$(this);var tables=$this.data('table');var remote=$this.data('load');$($this.data('remote-target')).load(tables,function(){var mTable=$('body #datatables').dataTable({"ajax":{"url":remote,"dataType":"json"},"sServerMethod":"POST","bServerSide":true,"scroll":true,"sScrollX":true,"bAutoWidth":false,"bDeferRender":true,"bSortClasses":false,"bScrollCollapse":true,"bStateSave":true,"responsive":true,"buttons":false,});});});$(".nav li.disabled a").click(function(){return false;});$(document).on('show.bs.modal','.modal',function(event){var zIndex=1040+(10*$('.modal:visible').length);$(this).css('z-index',zIndex);setTimeout(function(){$('.modal-backdrop').not('.modal-stack').css('z-index',zIndex-1).addClass('modal-stack');},0);});$("#modal-id").on("hidden.bs.modal",function(){$("#datatables").DataTable().destroy();$("#modal-id .modal-body").html('')});});$(function()
{$('body').on('click','.btn-add',function(e)
{e.preventDefault();var controlForm=$('.controls .row.entry'),currentEntry=$(this).parents('.tambah'),newEntry=$(currentEntry.clone()).appendTo(controlForm);newEntry.find('input').val('');controlForm.find('.entry:not(:last) .btn-add').removeClass('btn-add').addClass('btn-remove').removeClass('btn-success').addClass('btn-danger').html('<span class="glyphicon glyphicon-minus"></span>');}).on('click','.btn-remove',function(e)
{$(this).parents('.entry:first').remove();e.preventDefault();return false;});});$(document).ready(function(){$("body").on("click","#save",function(e){e.preventDefault();save(0);});$("body").on("click","#saverealisasi",function(e){e.preventDefault();});$("body").on("click","#savedetail",function(e){e.preventDefault();});$("body").on("click","#savedok",function(e){e.preventDefault();});$("body").on("click","#submitall",function(e){e.preventDefault();saveto(0,'#realisasi',baseurl);alert('Data Realisasi Disimpan..');var pk=$('#cookie #idnya').val();saveto(pk,'#detail_realisasi',detailurl);$('#dok_realisasi .idreal_upload').val(pk);saveto(pk,'#dok_realisasi',dokurl);});$("body").on("click","#save_edit",function(e){e.preventDefault();var id=$(this).attr("id");save(id);});$("body").on("click",'.baru',function(e){e.preventDefault();$('button#save_edit').hide(200);$('button#save').fadeIn(200);$('form').clearForm();var id=0;$('.kelola').show(200);});$("body").on("click",'.reset',function(e){e.preventDefault();$('button#save_edit').hide(200);$('button#save').fadeIn(200);$('form').clearForm();var id=null;});$('#modal-id').on('close.bs.modal',function(){alert('ok');$('.modal-body form').clearForm();})
$("body").on("click",'.batal',function(e){e.preventDefault();$('form').clearForm();$('.kelola').fadeOut(100);$('button#save').fadeIn(200);$('button#save_edit').hide(200);$('#datatables').DataTable().clear(0).draw();$('#inside').addClass('active in');$('li.daftar').addClass('active');$('li.baru').removeClass('active');$('#outside').removeClass('active');});$("body").on("click",".edit",function(e){e.preventDefault();$('#outside').addClass('active in');$('li.baru').addClass('active');$('li.daftar').removeClass('active');$('#inside').removeClass('active');$('.kelola').show(200);var id=$(this).attr("id");$(this).ready(function(){$.ajax({url:baseurl+"get/"+id,type:"get",dataType:"json",success:function(data){for(var i in data){$('input[name="'+i+'"]').val(data[i]);$("select#"+i+"").find('option').selectit(i,data[i]);$(".checkbox").find('input[type="checkbox"]').checkit(i,data[i]);$(".radio").find('input[type="radio"]').checkit(i,data[i]);}
$('#body').val(data.body);$('button#save').hide(200);$('button#save_edit').fadeIn(200);}});});});$("body").on("click",".alat",function(e){e.preventDefault();var id=$(this).attr("id");var id2=id.substr(id.length-1);var alat="alat"+id2;if($(this).is(":checked"))
{$("#"+alat).css("display","block");}else{$("#"+alat).css("display","none");}});$("body").on("click",".detail",function(e){e.preventDefault();});$("body").on("click",".delete",function(e){e.preventDefault();var del_data={id:$(this).attr("id"),ajax:1}
if(confirm('Anda Yakin Ingin Menghapus?')){$(this).ready(function(){$.ajax({url:baseurl+"delete/",type:'POST',data:del_data,success:function(msg){$('#datatables').DataTable().clear(0).draw();}});});}});function save(id){var data=$('body form#addform').serializeArray();data.push({name:'ajax',value:1});$(this).ready(function(){$.ajax({url:baseurl+"submit",data:data,type:"POST",success:function(){$('button#save').fadeIn(200);$('button#save_edit').hide(200);$('#inside').addClass('active in');$('li.daftar').addClass('active');$('li.baru').removeClass('active');$('#outside').removeClass('active');$('#datatables').DataTable().clear(0).draw();}});});}
function saveto(id,form,formurl){var datax=$(form).serializeArray();datax.push({name:'ajax',value:1});datax.push({name:'id_realisasi',value:id});$(this).ready(function(){$.ajax({url:formurl+"submit",data:datax,type:"POST",success:function(data){$('button#save').fadeIn(200);$('button#save_edit').hide(200);$("#cookie").html("<input type='text' id='idnya' name='idnya' value='"+data+"'>");if(form=='#dok_realisasi'){$("<input type='text' id='id_realisasi' name='id_realisasi' value='"+data+"'>").appendTo($("#dok_realisasi"));$('#dokupload').click();alert('File Terupload');};}});});}});$.fn.clearForm=function(){return this.each(function(){var type=this.type,tag=this.tagName.toLowerCase();if(tag=='form')
return $(':input',this).clearForm();if(type=='text'||type=='hidden'||type=='password'||tag=='textarea')
this.value='';else if(type=='checkbox'||type=='radio')
this.checked=false;else if(tag=='select')
this.selectedIndex=-1;});};$.fn.selectit=function(id,v){return this.each(function(){if($(this).val()==v){$(this).attr('selected','selected');}});}
$.fn.checkit=function(id,v){return this.each(function(){if($(this).val()==v){$(this).prop('checked',true);}else{$(this).prop('checked',false);}});}